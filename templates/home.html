{% extends 'base.html' %}
{% load static %}

{% block title %}Professional COVID-19 Detection System | AI-Powered Diagnostic Support{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/landing.css' %}">
{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center">
                <h1 class="hero-title">COVID-19 Detection System</h1>
                <p class="hero-subtitle">Clinical-grade AI diagnostic support powered by CrossViT deep learning architecture. Delivering rapid, accurate chest X-ray analysis with comprehensive explainability for healthcare professionals.</p>
            </div>
        </div>

        <!-- Hero Stats -->
        <div class="row hero-stats">
            <div class="col-md-3 col-6 hero-stat-item">
                <span class="hero-stat-number">6</span>
                <span class="hero-stat-label">AI Models</span>
            </div>
            <div class="col-md-3 col-6 hero-stat-item">
                <span class="hero-stat-number">95%+</span>
                <span class="hero-stat-label">Accuracy</span>
            </div>
            <div class="col-md-3 col-6 hero-stat-item">
                <span class="hero-stat-number">&lt;30s</span>
                <span class="hero-stat-label">Analysis Time</span>
            </div>
            <div class="col-md-3 col-6 hero-stat-item">
                <span class="hero-stat-number">100%</span>
                <span class="hero-stat-label">Explainable</span>
            </div>
        </div>
    </div>
</div>

<!-- Feature Cards -->
<div class="container mt-5">
    <div class="row g-4 mb-5">
        <div class="col-lg-4 col-md-6">
            <div class="feature-card card">
                <div class="card-body text-center p-4">
                    <i class="bi bi-cpu feature-icon"></i>
                    <h5 class="card-title">Multi-Model Ensemble Analysis</h5>
                    <p class="card-text">Advanced consensus prediction system utilizing six state-of-the-art deep learning architectures: CrossViT, ResNet-50, DenseNet-121, EfficientNet, Vision Transformer, and Swin Transformer. Provides comprehensive diagnostic confidence through model agreement analysis.</p>
                </div>
            </div>
        </div>

        <div class="col-lg-4 col-md-6">
            <div class="feature-card card">
                <div class="card-body text-center p-4">
                    <i class="bi bi-eye feature-icon"></i>
                    <h5 class="card-title">Explainable AI Visualization</h5>
                    <p class="card-text">Full diagnostic transparency through Grad-CAM heatmap visualization and CrossViT dual-branch attention mechanisms. Enables clinical validation by highlighting anatomical regions influencing AI predictions, supporting informed decision-making.</p>
                </div>
            </div>
        </div>

        <div class="col-lg-4 col-md-6">
            <div class="feature-card card">
                <div class="card-body text-center p-4">
                    <i class="bi bi-shield-check feature-icon"></i>
                    <h5 class="card-title">Clinical Deployment Ready</h5>
                    <p class="card-text">Enterprise-grade security with role-based access control, comprehensive audit logging, and regulatory compliance features. Designed for seamless integration into clinical workflows with prediction validation and medical record management.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Trust & Security Badges -->
<div class="trust-section">
    <div class="container">
        <div class="row g-4">
            <div class="col-lg-3 col-md-6">
                <div class="trust-badge">
                    <i class="bi bi-shield-lock"></i>
                    <h6>Data Security</h6>
                    <p>End-to-end encryption and secure data handling protocols</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="trust-badge">
                    <i class="bi bi-file-earmark-check"></i>
                    <h6>Audit Logging</h6>
                    <p>Complete activity tracking for regulatory compliance</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="trust-badge">
                    <i class="bi bi-people"></i>
                    <h6>Role-Based Access</h6>
                    <p>Granular permissions for medical staff and patients</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="trust-badge">
                    <i class="bi bi-graph-up"></i>
                    <h6>Validated Models</h6>
                    <p>Rigorously tested on clinical chest X-ray datasets</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- System Capabilities -->
<div class="capabilities-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">System Capabilities</h2>
            <p class="section-subtitle">Comprehensive diagnostic support platform combining cutting-edge AI technology with clinical workflow integration</p>
        </div>

        <div class="row">
            <div class="col-lg-6">
                <div class="capability-item">
                    <div class="capability-icon">
                        <i class="bi bi-image"></i>
                    </div>
                    <div class="capability-content">
                        <h5>Advanced Image Preprocessing</h5>
                        <p>CLAHE (Contrast Limited Adaptive Histogram Equalization) enhancement for optimal image quality, ensuring consistent analysis across varying radiograph quality levels and acquisition parameters.</p>
                    </div>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="capability-item">
                    <div class="capability-icon">
                        <i class="bi bi-diagram-3"></i>
                    </div>
                    <div class="capability-content">
                        <h5>CrossViT Architecture</h5>
                        <p>Dual-branch vision transformer leveraging both large and small patch embeddings for multi-scale feature extraction, providing superior diagnostic accuracy through hierarchical attention mechanisms.</p>
                    </div>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="capability-item">
                    <div class="capability-icon">
                        <i class="bi bi-layers"></i>
                    </div>
                    <div class="capability-content">
                        <h5>Model Comparison Dashboard</h5>
                        <p>Side-by-side performance analysis across all six AI models with confidence metrics, enabling clinicians to assess prediction consensus and identify areas requiring additional review.</p>
                    </div>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="capability-item">
                    <div class="capability-icon">
                        <i class="bi bi-calendar-check"></i>
                    </div>
                    <div class="capability-content">
                        <h5>Integrated Workflow Management</h5>
                        <p>Complete patient appointment scheduling, medical record integration, and prediction validation workflow designed to fit seamlessly into existing clinical processes.</p>
                    </div>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="capability-item">
                    <div class="capability-icon">
                        <i class="bi bi-bar-chart"></i>
                    </div>
                    <div class="capability-content">
                        <h5>Comprehensive Analytics</h5>
                        <p>Real-time analytics dashboard providing system performance metrics, prediction statistics, and clinical insights to support quality assurance and continuous improvement.</p>
                    </div>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="capability-item">
                    <div class="capability-icon">
                        <i class="bi bi-bell"></i>
                    </div>
                    <div class="capability-content">
                        <h5>Smart Notifications</h5>
                        <p>Configurable real-time alerts for critical findings, pending validations, and scheduled appointments, ensuring timely clinical response and efficient workflow coordination.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- How It Works -->
<div class="workflow-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Clinical Workflow</h2>
            <p class="section-subtitle">Streamlined diagnostic process from image upload to clinical decision support</p>
        </div>

        <div class="row position-relative">
            <div class="col-lg-3 col-md-6">
                <div class="workflow-step">
                    <div class="workflow-step-number">1</div>
                    <h5>Upload Chest X-Ray</h5>
                    <p>Secure upload of chest radiograph with patient information and clinical context. Supports standard DICOM and image formats.</p>
                </div>
            </div>

            <div class="col-lg-3 col-md-6">
                <div class="workflow-step">
                    <div class="workflow-step-number">2</div>
                    <h5>AI Processing</h5>
                    <p>Automated preprocessing and parallel analysis across six deep learning models with real-time progress tracking.</p>
                </div>
            </div>

            <div class="col-lg-3 col-md-6">
                <div class="workflow-step">
                    <div class="workflow-step-number">3</div>
                    <h5>Multi-Model Analysis</h5>
                    <p>Comprehensive prediction generation with confidence scores, model consensus evaluation, and explainability visualizations.</p>
                </div>
            </div>

            <div class="col-lg-3 col-md-6">
                <div class="workflow-step">
                    <div class="workflow-step-number">4</div>
                    <h5>Clinical Review</h5>
                    <p>Results delivered to clinician dashboard for validation, annotation, and integration with patient medical records.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Security & Compliance -->
<div class="security-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Security & Compliance</h2>
            <p class="section-subtitle">Healthcare-grade security architecture protecting patient data and ensuring regulatory compliance</p>
        </div>

        <div class="row g-4">
            <div class="col-lg-4">
                <div class="security-card">
                    <h5><i class="bi bi-shield-check"></i> Data Protection</h5>
                    <ul>
                        <li><i class="bi bi-check-circle"></i> End-to-end encryption for data in transit and at rest</li>
                        <li><i class="bi bi-check-circle"></i> Secure storage with access control and versioning</li>
                        <li><i class="bi bi-check-circle"></i> Automated backup and disaster recovery protocols</li>
                        <li><i class="bi bi-check-circle"></i> Regular security audits and penetration testing</li>
                    </ul>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="security-card">
                    <h5><i class="bi bi-file-earmark-text"></i> Audit & Compliance</h5>
                    <ul>
                        <li><i class="bi bi-check-circle"></i> Comprehensive activity logging for all user actions</li>
                        <li><i class="bi bi-check-circle"></i> Prediction validation workflow with approval tracking</li>
                        <li><i class="bi bi-check-circle"></i> User authentication with session management</li>
                        <li><i class="bi bi-check-circle"></i> Compliance reporting and export capabilities</li>
                    </ul>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="security-card">
                    <h5><i class="bi bi-people"></i> Access Control</h5>
                    <ul>
                        <li><i class="bi bi-check-circle"></i> Role-based permissions (Admin, Medical Staff, Patient)</li>
                        <li><i class="bi bi-check-circle"></i> Granular access control for sensitive operations</li>
                        <li><i class="bi bi-check-circle"></i> Patient data privacy with consent management</li>
                        <li><i class="bi bi-check-circle"></i> Multi-factor authentication support (configurable)</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Model Performance -->
<div class="performance-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title" style="color: var(--clinical-white);">Model Performance Metrics</h2>
            <p class="section-subtitle" style="color: rgba(255, 255, 255, 0.9);">Rigorously validated on clinical chest X-ray datasets with comprehensive evaluation metrics</p>
        </div>

        <div class="row">
            <div class="col-lg-3 col-md-6">
                <div class="performance-metric">
                    <span class="performance-value">95.2%</span>
                    <span class="performance-label">CrossViT Accuracy</span>
                    <span class="performance-description">Primary model validation accuracy</span>
                </div>
            </div>

            <div class="col-lg-3 col-md-6">
                <div class="performance-metric">
                    <span class="performance-value">94.8%</span>
                    <span class="performance-label">Ensemble Accuracy</span>
                    <span class="performance-description">Multi-model consensus performance</span>
                </div>
            </div>

            <div class="col-lg-3 col-md-6">
                <div class="performance-metric">
                    <span class="performance-value">0.96</span>
                    <span class="performance-label">AUC-ROC Score</span>
                    <span class="performance-description">Area under receiver operating curve</span>
                </div>
            </div>

            <div class="col-lg-3 col-md-6">
                <div class="performance-metric">
                    <span class="performance-value">93.5%</span>
                    <span class="performance-label">Sensitivity</span>
                    <span class="performance-description">COVID-positive detection rate</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Use Cases -->
<div class="use-cases-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Clinical Use Cases</h2>
            <p class="section-subtitle">Designed for diverse healthcare settings and clinical workflows</p>
        </div>

        <div class="row g-4">
            <div class="col-lg-4 col-md-6">
                <div class="use-case-card">
                    <div class="use-case-header">
                        <div class="use-case-icon">
                            <i class="bi bi-hospital"></i>
                        </div>
                        <h5>Hospital Integration</h5>
                    </div>
                    <p>Seamless integration with hospital radiology departments for high-volume screening and triage support in emergency and outpatient settings.</p>
                    <ul class="use-case-benefits">
                        <li><i class="bi bi-check-circle-fill"></i> Rapid triage support for ED patients</li>
                        <li><i class="bi bi-check-circle-fill"></i> Integration with existing PACS systems</li>
                        <li><i class="bi bi-check-circle-fill"></i> Batch processing capabilities</li>
                        <li><i class="bi bi-check-circle-fill"></i> Real-time radiology workflow support</li>
                    </ul>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="use-case-card">
                    <div class="use-case-header">
                        <div class="use-case-icon">
                            <i class="bi bi-clipboard2-pulse"></i>
                        </div>
                        <h5>Clinic Screening</h5>
                    </div>
                    <p>Point-of-care diagnostic support for primary care clinics and urgent care centers requiring rapid COVID-19 assessment capabilities.</p>
                    <ul class="use-case-benefits">
                        <li><i class="bi bi-check-circle-fill"></i> Immediate diagnostic support</li>
                        <li><i class="bi bi-check-circle-fill"></i> Patient communication tools</li>
                        <li><i class="bi bi-check-circle-fill"></i> Appointment scheduling integration</li>
                        <li><i class="bi bi-check-circle-fill"></i> Follow-up tracking capabilities</li>
                    </ul>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="use-case-card">
                    <div class="use-case-header">
                        <div class="use-case-icon">
                            <i class="bi bi-mortarboard"></i>
                        </div>
                        <h5>Research & Education</h5>
                    </div>
                    <p>Academic research platform for medical AI development, validation studies, and healthcare professional training on AI-assisted diagnostics.</p>
                    <ul class="use-case-benefits">
                        <li><i class="bi bi-check-circle-fill"></i> Model comparison capabilities</li>
                        <li><i class="bi bi-check-circle-fill"></i> Explainability demonstration tools</li>
                        <li><i class="bi bi-check-circle-fill"></i> Performance analytics and reporting</li>
                        <li><i class="bi bi-check-circle-fill"></i> Educational case repositories</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- CTA Section -->
{% if user.is_authenticated %}
<div class="cta-section">
    <div class="container">
        <div class="row">
            <div class="col-md-8 mx-auto text-center">
                <h2>Welcome Back, {{ user.get_full_name|default:user.username }}</h2>
                <p class="mb-4">Access your dashboard to continue your clinical workflow</p>

                {% if user.profile.is_staff %}
                    <a href="{% url 'detection:upload_xray' %}" class="btn btn-cta-primary me-3">
                        <i class="bi bi-cloud-upload"></i> Upload X-Ray
                    </a>
                    <a href="{% url 'detection:staff_dashboard' %}" class="btn btn-cta-secondary">
                        <i class="bi bi-speedometer2"></i> Go to Dashboard
                    </a>
                {% elif user.profile.is_patient %}
                    <a href="{% url 'detection:patient_dashboard' %}" class="btn btn-cta-primary me-3">
                        <i class="bi bi-speedometer2"></i> My Dashboard
                    </a>
                    <a href="{% url 'detection:prediction_history' %}" class="btn btn-cta-secondary">
                        <i class="bi bi-clock-history"></i> My Results
                    </a>
                {% else %}
                    <a href="{% url 'admin:index' %}" class="btn btn-cta-primary">
                        <i class="bi bi-gear"></i> Admin Panel
                    </a>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% else %}
<div class="cta-section">
    <div class="container">
        <div class="row">
            <div class="col-md-8 mx-auto text-center">
                <h2>Get Started Today</h2>
                <p class="mb-4">Join healthcare professionals using AI-powered diagnostic support</p>
                <a href="{% url 'register' %}" class="btn btn-cta-primary me-3">
                    <i class="bi bi-person-plus"></i> Create Account
                </a>
                <a href="{% url 'login' %}" class="btn btn-cta-secondary">
                    <i class="bi bi-box-arrow-in-right"></i> Sign In
                </a>
            </div>
        </div>
    </div>
</div>
{% endif %}

<!-- About / Footer Info -->
<div class="container my-5">
    <div class="row">
        <div class="col-12">
            <div class="card bg-light border-0">
                <div class="card-body p-4">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <h5 class="card-title mb-3"><i class="bi bi-info-circle text-primary"></i> Academic Research Project</h5>
                            <p class="mb-2">This COVID-19 Detection System represents a Final Year Project developed for the Bachelor of Data Science program at TAR UMT. The system demonstrates the integration of cutting-edge deep learning architectures with practical clinical workflow requirements.</p>
                            <p class="mb-0"><strong>Student:</strong> Tan Ming Kai (24PMR12003) | <strong>Institution:</strong> Tunku Abdul Rahman University of Management and Technology</p>
                        </div>
                        <div class="col-md-4 text-md-end mt-3 mt-md-0">
                            <p class="mb-2"><small class="text-muted"><i class="bi bi-star-fill text-warning"></i> CrossViT Primary Model</small></p>
                            <p class="mb-2"><small class="text-muted"><i class="bi bi-layers text-primary"></i> 6-Model Ensemble</small></p>
                            <p class="mb-0"><small class="text-muted"><i class="bi bi-code-square text-success"></i> Version 1.0.0</small></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
