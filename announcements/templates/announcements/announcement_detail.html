{% extends "base.html" %}
{% load common_tags %}

{% block title %}{{ announcement.title }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-10">
            {# ✅ FOUNDATION: Card component #}
            {% include 'components/card.html' with title=announcement.title %}
                {% block card_body %}
                    <div class="mb-4">
                        {# ✅ FOUNDATION: Status badge tag #}
                        {% status_badge announcement.priority %}

                        {% if announcement.is_active %}
                            <span class="badge bg-success ms-2">Active</span>
                        {% else %}
                            <span class="badge bg-secondary ms-2">Inactive</span>
                        {% endif %}
                    </div>

                    <p class="lead">{{ announcement.message }}</p>

                    <hr>

                    <div class="row text-muted">
                        <div class="col-md-6">
                            <p class="mb-2">
                                <strong>Author:</strong> {{ announcement.author.get_full_name|default:announcement.author.username }}
                            </p>
                            <p class="mb-2">
                                <strong>Posted:</strong> {% format_datetime announcement.created_at %}
                            </p>
                        </div>
                        <div class="col-md-6">
                            {% if announcement.expires_at %}
                                <p class="mb-2">
                                    <strong>Expires:</strong> {% format_datetime announcement.expires_at %}
                                </p>
                            {% endif %}
                            <p class="mb-2">
                                <strong>Last Updated:</strong> {% format_datetime announcement.updated_at %}
                            </p>
                        </div>
                    </div>

                    <div class="mt-4">
                        <a href="{% url 'announcements:announcement_list' %}" class="btn btn-secondary">
                            <i class="bi bi-arrow-left"></i> Back to List
                        </a>

                        {% if user.profile.is_staff_or_admin %}
                            <a href="{% url 'announcements:announcement_update' announcement.pk %}" class="btn btn-primary">
                                <i class="bi bi-pencil"></i> Edit
                            </a>
                        {% endif %}
                    </div>
                {% endblock %}
            {% endinclude %}
        </div>
    </div>
</div>
{% endblock %}
